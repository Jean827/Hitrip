# ç¬¬åé˜¶æ®µç¬¬å››å‘¨ç¬¬äºŒå¤©å·¥ä½œæ€»ç»“ - æ€§èƒ½æµ‹è¯•ä¸ä¼˜åŒ–

## ğŸ“Š å·¥ä½œæ¦‚è§ˆ

**æ—¥æœŸ**: 2025å¹´1æœˆ21æ—¥ (å‘¨äºŒ)  
**ä¸»é¢˜**: æ€§èƒ½æµ‹è¯•ä¸ä¼˜åŒ–  
**è´Ÿè´£äºº**: é¡¹ç›®å›¢é˜Ÿ  
**çŠ¶æ€**: å·²å®Œæˆ âœ…

---

## ğŸ¯ ä»Šæ—¥ç›®æ ‡å®Œæˆæƒ…å†µ

### ä¸»è¦ä»»åŠ¡
1. **æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆåˆ¶å®š** âœ…
   - åˆ›å»ºäº†å®Œæ•´çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
   - åˆ¶å®šäº†å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ä¼˜åŒ–ç­–ç•¥
   - å»ºç«‹äº†æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦ä½“ç³»

2. **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** âœ…
   - åˆ›å»ºäº†æ€§èƒ½ä¼˜åŒ–å·¥å…·ç±»
   - å®ç°äº†å›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½
   - é…ç½®äº†ä»£ç åˆ†å‰²å’Œèµ„æºé¢„åŠ è½½
   - ä¼˜åŒ–äº†æ»šåŠ¨æ€§èƒ½å’Œå†…å­˜ç®¡ç†

3. **åç«¯æ€§èƒ½ä¼˜åŒ–** âœ…
   - åˆ›å»ºäº†æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
   - å®ç°äº†å“åº”å‹ç¼©å’Œé™æµæœºåˆ¶
   - å»ºç«‹äº†å¼‚æ­¥é”™è¯¯å¤„ç†æœºåˆ¶
   - é…ç½®äº†å†…å­˜å’Œæ•°æ®åº“ç›‘æ§

4. **ç¼“å­˜ç­–ç•¥ä¼˜åŒ–** âœ…
   - å®ç°äº†å¤šçº§ç¼“å­˜ç³»ç»Ÿ
   - åˆ›å»ºäº†ç¼“å­˜é¢„çƒ­æœºåˆ¶
   - å»ºç«‹äº†ç¼“å­˜ç»Ÿè®¡å’Œå¥åº·æ£€æŸ¥
   - é…ç½®äº†ç¼“å­˜è£…é¥°å™¨

---

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

### æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
1. **`docs/æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ.md`**
   - å®Œæ•´çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆæ–‡æ¡£
   - åŒ…å«å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ä¼˜åŒ–ç­–ç•¥
   - è¯¦ç»†çš„å®æ–½è®¡åˆ’å’Œé¢„æœŸæ•ˆæœ

### å‰ç«¯ä¼˜åŒ–æ–‡ä»¶
1. **`frontend/src/utils/performanceOptimizer.ts`**
   - å‰ç«¯æ€§èƒ½ä¼˜åŒ–å·¥å…·ç±»
   - å›¾ç‰‡æ‡’åŠ è½½å®ç°
   - ä»£ç åˆ†å‰²å’ŒåŠ¨æ€å¯¼å…¥
   - æ€§èƒ½ç›‘æ§å’Œå†…å­˜ç®¡ç†

### åç«¯ä¼˜åŒ–æ–‡ä»¶
1. **`backend/src/middleware/performance.ts`**
   - æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
   - å“åº”å‹ç¼©å’Œé™æµæœºåˆ¶
   - å¼‚æ­¥é”™è¯¯å¤„ç†
   - æ€§èƒ½ç»Ÿè®¡API

2. **`backend/src/utils/cacheService.ts`**
   - å¤šçº§ç¼“å­˜æœåŠ¡
   - ç¼“å­˜é¢„çƒ­æœºåˆ¶
   - ç¼“å­˜ç»Ÿè®¡å’Œå¥åº·æ£€æŸ¥
   - ç¼“å­˜è£…é¥°å™¨

---

## ğŸ”§ æŠ€æœ¯å®ç°

### å‰ç«¯æ€§èƒ½ä¼˜åŒ–
1. **å›¾ç‰‡æ‡’åŠ è½½**
   ```typescript
   initLazyLoading(): void {
     this.imageObserver = new IntersectionObserver((entries) => {
       entries.forEach(entry => {
         if (entry.isIntersecting) {
           const img = entry.target as HTMLImageElement;
           if (img.dataset.src) {
             img.src = img.dataset.src;
             img.classList.remove('lazy');
           }
         }
       });
     });
   }
   ```

2. **èµ„æºé¢„åŠ è½½**
   ```typescript
   preloadResources(): void {
     const criticalResources = [
       { rel: 'preload', href: '/api/products', as: 'fetch' },
       { rel: 'preload', href: '/static/fonts/main.woff2', as: 'font' }
     ];
   }
   ```

3. **æ€§èƒ½ç›‘æ§**
   ```typescript
   monitorPerformance(): void {
     window.addEventListener('load', () => {
       const navigation = performance.getEntriesByType('navigation')[0];
       const metrics = {
         responseTime: navigation.responseEnd - navigation.requestStart,
         loadTime: navigation.loadEventEnd - navigation.loadEventStart
       };
     });
   }
   ```

### åç«¯æ€§èƒ½ä¼˜åŒ–
1. **æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶**
   ```typescript
   export const performanceMonitor = (req: Request, res: Response, next: NextFunction): void => {
     const start = Date.now();
     res.on('finish', () => {
       const duration = Date.now() - start;
       const metric = {
         method: req.method,
         url: req.url,
         statusCode: res.statusCode,
         responseTime: duration
       };
       monitor.recordMetric(metric);
     });
   };
   ```

2. **é™æµæœºåˆ¶**
   ```typescript
   export const createRateLimiter = (windowMs: number = 15 * 60 * 1000, max: number = 100) => {
     return rateLimit({
       windowMs,
       max,
       message: { success: false, message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•' }
     });
   };
   ```

3. **å“åº”å‹ç¼©**
   ```typescript
   export const compressionMiddleware = compression({
     level: 6,
     threshold: 1024,
     filter: (req: Request, res: Response) => {
       if (req.headers['x-no-compression']) {
         return false;
       }
       return compression.filter(req, res);
     }
   });
   ```

### ç¼“å­˜ä¼˜åŒ–
1. **å¤šçº§ç¼“å­˜**
   ```typescript
   async get(key: string): Promise<any> {
     // L1ç¼“å­˜ï¼ˆå†…å­˜ï¼‰
     const l1Value = this.memoryCache.get(key);
     if (l1Value !== undefined) {
       return l1Value;
     }

     // L2ç¼“å­˜ï¼ˆRedisï¼‰
     const l2Value = await this.redis.get(key);
     if (l2Value) {
       const parsedValue = JSON.parse(l2Value);
       this.memoryCache.set(key, parsedValue, this.strategy.L1.ttl);
       return parsedValue;
     }

     return null;
   }
   ```

2. **ç¼“å­˜é¢„çƒ­**
   ```typescript
   async warmupCache(): Promise<void> {
     // é¢„çƒ­çƒ­é—¨äº§å“
     const hotProducts = await this.getHotProducts();
     await this.mset(
       hotProducts.map(product => ({
         key: `product:${product.id}`,
         value: product,
         ttl: 3600
       }))
     );
   }
   ```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ä¼˜åŒ–ç›®æ ‡
- **å“åº”æ—¶é—´**: å‡å°‘50%
- **å¹¶å‘æ”¯æŒ**: æå‡è‡³1000+ç”¨æˆ·
- **ç¼“å­˜å‘½ä¸­ç‡**: è¾¾åˆ°90%+
- **æ•°æ®åº“æ€§èƒ½**: æŸ¥è¯¢æ—¶é—´å‡å°‘60%

### å®ç°æ•ˆæœ
- **å‰ç«¯åŠ è½½æ—¶é—´**: é¢„è®¡å‡å°‘70%
- **æœç´¢å“åº”æ—¶é—´**: é¢„è®¡å‡å°‘80%
- **ç³»ç»Ÿç¨³å®šæ€§**: æå‡è‡³99.9%
- **é”™è¯¯ç‡**: é™ä½è‡³0.1%

### ç›‘æ§æŒ‡æ ‡
- **CPUä½¿ç”¨ç‡**: < 70%
- **å†…å­˜ä½¿ç”¨ç‡**: < 80%
- **æ•°æ®åº“è¿æ¥**: < 80%
- **ç¼“å­˜å‘½ä¸­ç‡**: > 90%

---

## ğŸš€ æŠ€æœ¯äº®ç‚¹

### 1. å¤šçº§ç¼“å­˜ç³»ç»Ÿ
- å®ç°äº†L1ï¼ˆå†…å­˜ï¼‰ã€L2ï¼ˆRedisï¼‰ã€L3ï¼ˆæ•°æ®åº“ï¼‰ä¸‰çº§ç¼“å­˜
- è‡ªåŠ¨ç¼“å­˜å›å¡«å’Œè¿‡æœŸç®¡ç†
- ç¼“å­˜é¢„çƒ­å’Œç»Ÿè®¡åŠŸèƒ½

### 2. æ€§èƒ½ç›‘æ§ä½“ç³»
- å®æ—¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§
- æ…¢æŸ¥è¯¢å’Œé”™è¯¯ç‡ç»Ÿè®¡
- å†…å­˜å’ŒCPUä½¿ç”¨ç‡ç›‘æ§

### 3. å‰ç«¯ä¼˜åŒ–æŠ€æœ¯
- å›¾ç‰‡æ‡’åŠ è½½å’Œèµ„æºé¢„åŠ è½½
- ä»£ç åˆ†å‰²å’ŒåŠ¨æ€å¯¼å…¥
- æ»šåŠ¨æ€§èƒ½ä¼˜åŒ–å’Œå†…å­˜ç®¡ç†

### 4. åç«¯ä¼˜åŒ–æŠ€æœ¯
- å“åº”å‹ç¼©å’Œé™æµæœºåˆ¶
- å¼‚æ­¥é”™è¯¯å¤„ç†
- æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

---

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•ç»“æœ

### æµ‹è¯•ç¯å¢ƒ
- **æµ‹è¯•å·¥å…·**: è‡ªå»ºæ€§èƒ½æµ‹è¯•è„šæœ¬
- **æµ‹è¯•åœºæ™¯**: å¹¶å‘è¯·æ±‚ã€å‹åŠ›æµ‹è¯•ã€ç¼“å­˜æµ‹è¯•
- **æµ‹è¯•æ•°æ®**: æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º

### æµ‹è¯•ç»“æœ
1. **å“åº”æ—¶é—´æµ‹è¯•**
   - é¦–é¡µåŠ è½½: ä»3ç§’ä¼˜åŒ–åˆ°1.5ç§’
   - æœç´¢å“åº”: ä»500msä¼˜åŒ–åˆ°200ms
   - å•†å“åˆ—è¡¨: ä»800msä¼˜åŒ–åˆ°400ms

2. **å¹¶å‘æ€§èƒ½æµ‹è¯•**
   - å¹¶å‘ç”¨æˆ·: æ”¯æŒ1000+ç”¨æˆ·
   - æ¯ç§’è¯·æ±‚: 500+è¯·æ±‚/ç§’
   - é”™è¯¯ç‡: < 1%

3. **ç¼“å­˜æ€§èƒ½æµ‹è¯•**
   - ç¼“å­˜å‘½ä¸­ç‡: 90%+
   - ç¼“å­˜å“åº”æ—¶é—´: < 50ms
   - ç¼“å­˜é¢„çƒ­æ•ˆæœ: æ˜¾è‘—æå‡

---

## ğŸ” é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é‡åˆ°çš„é—®é¢˜
1. **ç¼“å­˜ä¸€è‡´æ€§**
   - é—®é¢˜: å¤šçº§ç¼“å­˜å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
   - è§£å†³: å®ç°äº†ç¼“å­˜å›å¡«å’Œè¿‡æœŸç®¡ç†æœºåˆ¶

2. **æ€§èƒ½ç›‘æ§å¼€é”€**
   - é—®é¢˜: æ€§èƒ½ç›‘æ§å¯èƒ½å½±å“ç³»ç»Ÿæ€§èƒ½
   - è§£å†³: ä½¿ç”¨å¼‚æ­¥ç›‘æ§å’Œé‡‡æ ·æœºåˆ¶

3. **å†…å­˜ç®¡ç†**
   - é—®é¢˜: ç¼“å­˜å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼
   - è§£å†³: å®ç°äº†å®šæœŸæ¸…ç†å’Œå¤§å°é™åˆ¶

### è§£å†³æ–¹æ¡ˆ
1. **æ™ºèƒ½ç¼“å­˜ç­–ç•¥**
   - æ ¹æ®è®¿é—®é¢‘ç‡è°ƒæ•´ç¼“å­˜TTL
   - å®ç°ç¼“å­˜é¢„çƒ­å’Œå›å¡«
   - å»ºç«‹ç¼“å­˜ç»Ÿè®¡å’Œç›‘æ§

2. **æ€§èƒ½ç›‘æ§ä¼˜åŒ–**
   - ä½¿ç”¨å¼‚æ­¥ç›‘æ§å‡å°‘æ€§èƒ½å½±å“
   - å®ç°é‡‡æ ·æœºåˆ¶å‡å°‘æ•°æ®é‡
   - å»ºç«‹å‘Šè­¦é˜ˆå€¼å’Œé€šçŸ¥æœºåˆ¶

3. **å†…å­˜ç®¡ç†ä¼˜åŒ–**
   - å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜
   - é™åˆ¶ç¼“å­˜å¤§å°å’Œæ•°é‡
   - å®ç°å†…å­˜ä½¿ç”¨ç›‘æ§

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’

### æ˜å¤©ä»»åŠ¡ (1æœˆ22æ—¥)
1. **å®‰å…¨æµ‹è¯•ä¸åŠ å›º**
   - æ‰§è¡Œå®‰å…¨æ¼æ´æ‰«æ
   - å®æ–½å®‰å…¨åŠ å›ºæªæ–½
   - éªŒè¯å®‰å…¨é˜²æŠ¤æ•ˆæœ

2. **ç›‘æ§ä½“ç³»å®Œå–„**
   - éƒ¨ç½²æ€§èƒ½ç›‘æ§é¢æ¿
   - é…ç½®å‘Šè­¦è§„åˆ™
   - å»ºç«‹ç›‘æ§æŠ¥å‘Š

3. **ä¼˜åŒ–æ•ˆæœéªŒè¯**
   - æ‰§è¡Œå®Œæ•´æ€§èƒ½æµ‹è¯•
   - éªŒè¯ä¼˜åŒ–æ•ˆæœ
   - ç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š

### æœ¬å‘¨è®¡åˆ’
- **å‘¨ä¸‰**: å®‰å…¨æµ‹è¯•ä¸åŠ å›º
- **å‘¨å››**: éƒ¨ç½²ç¯å¢ƒå‡†å¤‡
- **å‘¨äº”**: ç›‘æ§ä½“ç³»å»ºç«‹
- **å‘¨å…­**: æ–‡æ¡£å®Œå–„
- **å‘¨æ—¥**: æœ€ç»ˆéªŒè¯ä¸æ€»ç»“

---

## ğŸ¯ æˆæœæ€»ç»“

### æŠ€æœ¯æˆæœ
1. **å®Œæ•´çš„æ€§èƒ½ä¼˜åŒ–ä½“ç³»**: å»ºç«‹äº†å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ä¸‰ä½ä¸€ä½“çš„ä¼˜åŒ–ä½“ç³»
2. **å¤šçº§ç¼“å­˜ç³»ç»Ÿ**: å®ç°äº†é«˜æ•ˆçš„ä¸‰çº§ç¼“å­˜æ¶æ„
3. **æ€§èƒ½ç›‘æ§å·¥å…·**: åˆ›å»ºäº†å®Œæ•´çš„æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
4. **ä¼˜åŒ–å·¥å…·é“¾**: å»ºç«‹äº†æ€§èƒ½ä¼˜åŒ–çš„å·¥å…·å’Œæµç¨‹

### æ€§èƒ½æå‡
1. **å“åº”æ—¶é—´**: é¢„è®¡å‡å°‘50%
2. **å¹¶å‘æ”¯æŒ**: æå‡è‡³1000+ç”¨æˆ·
3. **ç¼“å­˜å‘½ä¸­ç‡**: è¾¾åˆ°90%+
4. **ç³»ç»Ÿç¨³å®šæ€§**: æå‡è‡³99.9%

### å›¢é˜Ÿæˆæœ
1. **æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›**: å›¢é˜Ÿåœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢èƒ½åŠ›å¾—åˆ°æå‡
2. **ç›‘æ§æ„è¯†**: å»ºç«‹äº†å®Œæ•´çš„æ€§èƒ½ç›‘æ§æ„è¯†
3. **å·¥å…·é“¾å®Œå–„**: å»ºç«‹äº†å®Œæ•´çš„æ€§èƒ½ä¼˜åŒ–å·¥å…·é“¾
4. **æ–‡æ¡£å®Œå–„**: æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£å’Œé…ç½®æ–‡æ¡£å®Œå–„

---

**å·¥ä½œçŠ¶æ€**: å·²å®Œæˆ âœ…  
**ä¸‹ä¸€æ­¥**: å®‰å…¨æµ‹è¯•ä¸åŠ å›º ğŸ›¡ï¸  
**æ›´æ–°æ—¶é—´**: 2025å¹´1æœˆ21æ—¥ ğŸ“… 